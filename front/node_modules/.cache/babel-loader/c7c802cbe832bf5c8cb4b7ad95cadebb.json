{"ast":null,"code":"var _jsxFileName = \"/Users/conarrr/work/app/Study/React_Rails/study/open-flights/front/src/components/Airline/Airline.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Header from './Main/Header';\nimport Review from './Main/Review';\nimport ReviewForm from './ReviewForm/ReviewForm';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Airline = props => {\n  _s();\n\n  const [airline, setAirline] = useState({});\n  const [review, setReview] = useState({});\n  const [loaded, setLoaded] = useState(false);\n  const [title, setTitle] = useState({});\n  const [description, setDescription] = useState({});\n  const [score, setScore] = useState({});\n  useEffect(() => {\n    console.log('airline detail get done');\n    const slug = props.match.params.slug;\n    const url = `http://localhost:3000/api/v1/airlines/${slug}`;\n    axios.get(url).then(resp => {\n      console.log(resp);\n      setAirline(resp.data);\n      setLoaded(true);\n      console.log(reviews);\n    }).catch(resp => {});\n  }, [props.match.params.slug, review]);\n\n  const handleTitle = e => {\n    setTitle(Object.assign({}, title, {\n      title: e.target.value\n    }));\n  };\n\n  const handleDescription = e => {\n    setTitle(Object.assign({}, description, {\n      description: e.target.value\n    }));\n  };\n\n  const handleScore = (selected, e) => {\n    setScore(Object.assign({}, score, {\n      score: selected\n    }));\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const airline_id = airline.data.id;\n    axios.post('http://localhost:3000/api/v1/reviews', {\n      review,\n      airline_id\n    }).then(resp => {\n      const included = [...airline.included, resp.data.data];\n      setAirline({ ...airline,\n        included\n      });\n      setReview(Object.assign({}, review, title, description, score));\n      setTitle({}) && setDescription({}) && setScore({});\n    }).catch(resp => {});\n  };\n\n  let reviews;\n\n  if (loaded && airline.included) {\n    reviews = airline.included.map((item, index) => {\n      return /*#__PURE__*/_jsxDEV(Review, {\n        attributes: item.attributes\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: loaded && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Column, {\n        children: /*#__PURE__*/_jsxDEV(Main, {\n          children: [/*#__PURE__*/_jsxDEV(Header, {\n            attributes: airline.data.attributes,\n            reviews: airline.included\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this), reviews]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Column, {\n        children: /*#__PURE__*/_jsxDEV(ReviewForm, {\n          handleTitle: handleTitle,\n          handleDescription: handleDescription,\n          handleSubmit: handleSubmit,\n          handleScore: handleScore,\n          attributes: airline.data.attributes,\n          title: title.title,\n          description: description.description,\n          score: score\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Airline, \"kdMzkgTVcqovmRUcM3PyyIKu4II=\");\n\n_c = Airline;\nconst Wrapper = styled.div`\n  margin-left: auto;\n  margin-right: auto;\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n`;\n_c2 = Wrapper;\nconst Column = styled.div`\n  background: #fff;\n  height: 100vh;\n  overflow: scroll;\n\n  &:last-child {\n    background: #000;\n  }\n`;\n_c3 = Column;\nconst Main = styled.div`\n  padding-left: 50px;\n`;\n_c4 = Main;\nexport default Airline;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Airline\");\n$RefreshReg$(_c2, \"Wrapper\");\n$RefreshReg$(_c3, \"Column\");\n$RefreshReg$(_c4, \"Main\");","map":{"version":3,"sources":["/Users/conarrr/work/app/Study/React_Rails/study/open-flights/front/src/components/Airline/Airline.js"],"names":["React","useState","useEffect","axios","Header","Review","ReviewForm","styled","Airline","props","airline","setAirline","review","setReview","loaded","setLoaded","title","setTitle","description","setDescription","score","setScore","console","log","slug","match","params","url","get","then","resp","data","reviews","catch","handleTitle","e","Object","assign","target","value","handleDescription","handleScore","selected","handleSubmit","preventDefault","airline_id","id","post","included","map","item","index","attributes","Wrapper","div","Column","Main"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport Header from './Main/Header'\nimport Review from './Main/Review'\nimport ReviewForm from './ReviewForm/ReviewForm'\nimport styled from 'styled-components'\n\nconst Airline = (props) => {\n  const [airline, setAirline] = useState({})\n  const [review, setReview] = useState({})\n\n  const [loaded, setLoaded] = useState(false)\n\n  const [title, setTitle] = useState({})\n  const [description, setDescription] = useState({})\n  const [score, setScore ] = useState({})\n\n  useEffect(() => {\n    console.log('airline detail get done')\n    const slug = props.match.params.slug\n    const url = `http://localhost:3000/api/v1/airlines/${slug}`\n\n    axios.get(url)\n    .then( resp => {\n      console.log(resp)\n      setAirline(resp.data)\n      setLoaded(true)\n      console.log(reviews)\n    })\n    .catch( resp => {})\n  }, [props.match.params.slug, review])\n\n  const handleTitle = (e) => {\n    setTitle(Object.assign({}, title, {title: e.target.value}))\n  }\n\n  const handleDescription = (e) => {\n    setTitle(Object.assign({}, description, {description: e.target.value}))\n  }\n\n  const handleScore = (selected, e) => {\n    setScore(Object.assign({}, score, {score: selected}))\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    const airline_id = airline.data.id\n    axios.post('http://localhost:3000/api/v1/reviews', {review, airline_id})\n    .then( resp => {\n      const included = [...airline.included, resp.data.data]\n      setAirline({...airline, included})\n      setReview(Object.assign({}, review, title, description, score))\n      setTitle({}) && setDescription({}) && setScore({})\n    })\n    .catch( resp => {})\n  } \n\n  let reviews\n  if (loaded && airline.included) {\n    reviews = airline.included.map((item, index) => {\n      return (\n        <Review\n          key={index}\n          attributes={item.attributes}\n        />\n      )\n    })\n  }\n\n  return (\n    <Wrapper>\n      {\n        loaded &&\n        <>\n          <Column>\n            <Main>\n              <Header\n                attributes={airline.data.attributes}\n                reviews={airline.included}\n              />\n              {reviews}\n            </Main>\n          </Column>\n          <Column>\n            <ReviewForm\n              handleTitle={handleTitle}\n              handleDescription={handleDescription}\n              handleSubmit={handleSubmit}\n              handleScore={handleScore}\n              attributes={airline.data.attributes}\n              title={title.title}\n              description={description.description}\n              score={score}\n            />\n          </Column>\n        </>\n      }\n    </Wrapper>\n  )\n}\n\nconst Wrapper = styled.div`\n  margin-left: auto;\n  margin-right: auto;\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n`\nconst Column = styled.div`\n  background: #fff;\n  height: 100vh;\n  overflow: scroll;\n\n  &:last-child {\n    background: #000;\n  }\n`\nconst Main = styled.div`\n  padding-left: 50px;\n`\n\nexport default Airline"]},"metadata":{},"sourceType":"module"}